# Example configuration for market data ingestion system

database:
  db_path: "market_data.db"  # Path to SQLite database
  # For PostgreSQL: connection_string: "postgresql://user:pass@localhost:5432/market_data"

providers:
  yfinance:
    is_active: True
    rate_limit_per_minute: 100  # Adjust based on yfinance usage
  alphavantage:
    is_active: True
    api_key: "${ALPHAVANTAGE_API_KEY}"
    base_url: "https://www.alphavantage.co"
    rate_limit_per_minute: 5  # Alpha Vantage free tier limit
  kite_ws:
    is_active: True
    api_key: "${KITE_API_KEY}"
    api_secret: "${KITE_API_SECRET}"
    websocket_url: "ws://localhost:8765"  # Replace with real Kite websocket URL
    reconnect_interval: 5  # Reconnect interval in seconds
    heartbeat_interval: 30 # Heartbeat interval in seconds

instruments:
  - symbol: "RELIANCE.NS"
    provider: "yfinance"
  - symbol: "TCS.NS"
    provider: "yfinance"
  - symbol: "AAPL"
    provider: "alphavantage"

pipelines:
  realtime:
    enabled: True
    symbols: ["RELIANCE.NS", "TCS.NS"]
    provider: "mock"  # Use "kite_ws" for real Kite, "mock" for testing
  backfill:
    enabled: True
    symbols: ["AAPL", "RELIANCE.NS"]
    period: "7d"
    interval: "1d"

logging:
  level: "INFO"
  format: "%(asctime)s - %(levelname)s - %(message)s"

health:
  port: 8080
  check_interval: 30

metrics:
  port: 9090
  enabled: True

scheduler:
  auto_refresh:
    enabled: True
    run_time: "02:00"        # 24h format HH:MM
    timezone: "UTC"          # IANA timezone name
    period: "7d"             # Backfill window
    interval: "1h"           # Candle interval
    symbols: ["AAPL", "RELIANCE.NS"]  # Optional override. Uses pipelines.backfill when omitted.
